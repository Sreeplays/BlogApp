let user;_762‍.x([["registerController",()=>registerController]]);_762‍.w("../models/user.js",[["default",["user"],function(v){user=v}]]);

       const registerController = async (req, res) => {
    try {
        const {name, email, password} = req.body
        // Check whether the user exists
        let User = await user.findOne({email})
        if(User) {
            return res.status(400).json({msg: "User already exists"})
        }
        // Creating a new user
        User = await user.create({
            name, email, password
        })

        return res.status(201).json({
            _id: User._id,
            avatar: User.avatar,
            name: User.name,
            email: User.email,
            verified: User.verified,
            admin: User.admin,
            token: await user.generateJWT()
        })
        
    } catch (error) {
        return res.status(500).json({message: "Something went wrong"})
    }
}